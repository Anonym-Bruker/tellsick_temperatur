<!DOCTYPE html>
<html lang="en" xmlns:border="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Str√∏mforbruk-Elvia</title>
    <%if(darkmode == "on"){%>
    <link rel="stylesheet" href="dark.css">
    <%}%>
    <%if(darkmode == "off"){%>
    <link rel="stylesheet" href="main.css">
    <%}%>
</head>
<body>
<script>
    var values = [0];
    var labels = ['A'];

    <%
    for(var t = 0; t < temperaturer.length; t++){
        var temp = temperaturer[t][0];
        var time = temperaturer[t][1];
	%>
        labels[<%=t%>] = "<%=time%>";
        values[<%=t%>] = <%=temp%>;
	<%
    }
    %>

</script>
<table border="0">
    <td width="100" valign="top" >
	<p style="color:white;font-size:40px;"><%=temperaturer[temperaturer.length - 1][0]%>&deg;C</p> 
    </td>
    <td width="400" align="center">
	<canvas id="myChart" width="800" height="120"></canvas>
    </td>
    <td width="100" align="center">
        <%if(darkmode == "on"){%>
            <form action="/mode/daymode" method="get">
                <input type="submit" value="Darkmode off" style="height:25px; width:100px">
            </form>
        <%}%>
        <%if(darkmode == "off"){%>
            <form action="/mode/1" method="get">
                <input type="submit" value="Darkmode on" style="height:25px; width:100px">
            </form>
        <%}%>
	<br/>
        <form action="/mode/reload" method="get">
            <input type="submit" value="Reload page" style="height:25px; width:100px">
        </form>
    </td>
</table>


<!--script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.js"></script-->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
var ctx = document.getElementById('myChart');

function colorize() {
    return (ctx) => {
        var v = ctx.parsed.y;
        var c = v < 5 ? '#44DE28'
            : v < 10 ? '#F46300'
                : v < 15 ? '#D60000'
                    : '#0358B6';

        return c ;
    };
}

</script>
<script>

    var myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: labels,
            datasets: [{
			label: 'Temperatur',
			borderColor: 'white',
	                data: values
                }]
        }, 
	options:{
		scales: {
			y: {
				title:{
					color: 'white
				}
			}
		},
		plugins:{
			legend: {
				display: false
			}
		}
	}
    })
</script>
</body>
</html>
